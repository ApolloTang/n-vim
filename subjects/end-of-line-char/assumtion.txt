

Unix, Windows, and MAC all use different end of line (EOL) character.

Vim typically figures out the fileformat for you automatically. A file with

\r\n  --> dos           [CR]{LF}
\r    --> clasical mac
\n    --> unix/mac

when a file contains BOTH \r\n and \n linefeeds,
    Vim declares it as a UNIX file and displays the ^M (\r) characters.

    These mixed-EOL files come about from stuff edited in different
    editors: some editors only save the lines actually changed
    converting only part of the file to DOS-style or MAC-style line
    endings. This also happens with files generated by user-written
    programs if a consistent mechanism for line termination isn't used


Here is the trick to remove all the ^M's.

You must be in command mode (From normal mode and press :(colon) to enter command mode)

    set fileformat=mac

Save and restart Vim for the changes to take effect. (simply refreshing does
not work. I don't know why)


file-content:
    aaaaaaaaaa\r\n
    aaaaaaaaaa\r\n

buffer-content:
    aaaaaaaaaa\r\n
    aaaaaaaaaa\r\n

display ff=unix, ffs=unix
    aaaaaaaaaa^M[eol]
    aaaaaaaaaa^M[eol]

in the above ^M is \r which is [eol for mac] will be saved as \r

file-content, saved with ff=mac
    aaaaaaaaaa\r
    aaaaaaaaaa\r


ref http://cs.clarku.edu/resources/vim.shtml




    In Cygwin or unix, you can convert a file INFILE in DOS format
    to a file OUTFILE in Unix format by calling:

        > tr -d '\15' < INFILE > OUTFILE


::: FTP and line ending

    All FTP software can transfer files in "ascii" or "binary" mode.

    In "ascii" mode, the FTP software will convert line breaks, in "binary"
    mode it will not.  In "ascii" mode, transferring a Windows file from a
    Windows PC to a Linux server results in a UNIX file on the server.

    Downloading the file again converts it back to Windows.  Many FTP clients
    also have an "automatic" mode that switches between ascii and binary
    depending on the extension of the file you're transferring.

    Watch out when upload file as binary mode:

        When a webmaster uploads a Windows file to a Linux server in "binary"
        mode, the file has CR LF line breaks on the server. If you then
        download that file with your web browser on your Windows PC (which does
        the UNIX->Windows conversion), the browser will interpret the
        downloaded file as a UNIX file, even though it is in Windows format. It
        will convert each LF into CR LF, resulting in a file that uses CR CR LF
        as line breaks.

        So, before uploading a file, use the Convert menu to make sure the file
        has the line break style that the server expects (if the server cares
        at all).

        http://www.editpadpro.com/tricklinebreak.html



